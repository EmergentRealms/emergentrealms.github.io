<?xml version="1.0" encoding="UTF-8"?>
<class name="DWAutoLoad" inherits="Node" version="4.2">
    <brief_description>
        Node base class for globally persisted state that syncs itself with the database.
    </brief_description>
    <description>
        `DWAutoLoad` is designed to be subclassed by nodes you register as Godot autoloads. When attached to the scene tree it watches the [class DWService] singleton: once the service connects it pulls the latest data from SQLite, and before the service disconnects it pushes any changes back.

        [codeblocks]
        [gdscript]
        class_name FactionCache
        extends DWAutoLoad

        @export var factions: Array[Faction] = []
        var table_name := "faction_cache"

        func _ready() -> void:
            super._ready() # ensures the service hooks are installed
        [/gdscript]
        [/codeblocks]
    </description>
    <tutorials>
    </tutorials>
    <methods>
        <method name="load_from_db">
            <return type="bool" />
            <description>
                Loads the latest row for this autoload table into the current node. Properties that match registered columns are copied from the cached instance stored by [class DWService]. Returns [code]false[/code] when the service is unavailable or no row exists yet.
            </description>
        </method>
        <method name="save_to_db">
            <return type="bool" />
            <param index="0" name="wait" type="bool" default="false" />
            <description>
                Persists the node state to the database. Works like [method DWRecord.save_to_db] with the addition that the autoload schema is tailored for a single-row table. Use [code]wait = true[/code] when saving during shutdown.
            </description>
        </method>
        <method name="get_guid">
            <return type="PackedByteArray" />
            <description>
                Returns the unique identifier backing this autoload instance.
            </description>
        </method>
        <method name="set_guid">
            <return type="void" />
            <param index="0" name="guid" type="PackedByteArray" />
            <description>
                Sets the identifier used as the primary key for the autoload row.
            </description>
        </method>
        <method name="get_owner">
            <return type="PackedByteArray" />
            <description>
                Returns the optional owner GUID associated with the autoload data.
            </description>
        </method>
        <method name="set_owner">
            <return type="void" />
            <param index="0" name="guid" type="PackedByteArray" />
            <description>
                Assigns the owner GUID. Use this if the autoload data should be scoped to a specific save slot or profile.
            </description>
        </method>
        <method name="get_table_type">
            <return type="int" />
            <description>
                Returns the [enum DWTypes.TableType] value that categorizes this table. Autoloads default to [enum DWTypes.TableType.AUTOLOAD].
            </description>
        </method>
    </methods>
    <members>
        <member name="guid" type="PackedByteArray" setter="set_guid" getter="get_guid">
            Identifier persisted with the autoload row.
        </member>
        <member name="owner_guid" type="PackedByteArray" setter="set_owner" getter="get_owner">
            Optional owner identifier, often used to associate the autoload data with the active save slot.
        </member>
    </members>
</class>
