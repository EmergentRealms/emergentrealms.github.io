<?xml version="1.0" encoding="UTF-8" ?>
<class name="DV_KPI_Tile" inherits="DVComponent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/godotengine/godot/master/doc/class.xsd">
	<brief_description>
		Compact KPI display tile with title, value, delta indicator, optional icon/subtitle/footnote, and a sparkline.
	</brief_description>

	<description>
		[code]DV_KPI_Tile[/code] is a lightweight dashboard control for showing a single metric ("key performance indicator").
		It renders:
		- A [member Values/title] with optional [member Values/title_color].
		- A formatted main value built from [member Values/prefix] + [member Values/value] + [member Values/suffix].
		- A delta arrow/tint using [member Values/delta] and the style colors [member Style/delta_positive] / [member Style/delta_negative].
		- An optional [member Values/subtitle] and [member Values/footnote].
		- An optional [member Values/icon] drawn at [member Style/icon_size].
		- A small sparkline driven by [member sparkline]. The value scaling can be automatic
		    ([method is_sparkline_autoscale]) or fixed via [method set_sparkline_range].
		

		This control is typically used in grids to summarize trends at a glance and can be made interactive via [signal tile_clicked].

		[codeblocks]
		[gdscript]
		
		extends DV_KPI_Tile

		func _ready():
			set_title("Daily Revenue")
			custom_minimum_size = Vector2(260, 140)

			set_value(12843.0)
			set_delta(+3.8)
			set_prefix("$")
			set_suffix("")
			set_subtitle("Last 24h")
			set_footnote("vs. yesterday")

			set_sparkline(PackedFloat32Array([0.1, 0.25, 0.21, 0.28, 0.34, 0.31, 0.36, 0.38]))
		[/gdscript]
		[/codeblocks]
	</description>

	<tutorials>
	</tutorials>

	<methods>
		<method name="get_sparkline_range" qualifiers="const">
			<return type="Vector2" />
			<description>
				Returns the explicit sparkline range as [code]Vector2(min, max)[/code] when autoscaling is disabled.
				If autoscaling is enabled, this returns the last configured manual range (useful for inspection).
			</description>
		</method>

		<method name="is_sparkline_autoscale" qualifiers="const">
			<return type="bool" />
			<description>
				Returns [code]true[/code] if the sparkline scales its Y-axis to the data automatically.
				When [code]true[/code], any manual range set via [method set_sparkline_range] is ignored for rendering.
			</description>
		</method>

		<method name="set_sparkline_autoscale">
			<return type="void" />
			<param index="0" name="v" type="bool" />
			<description>
				Enables or disables sparkline autoscaling. Set to [code]false[/code] to enforce a fixed Y-range configured with
				[method set_sparkline_range].
			</description>
		</method>

		<method name="set_sparkline_range">
			<return type="void" />
			<param index="0" name="min" type="float" />
			<param index="1" name="max" type="float" />
			<description>
				Sets the fixed Y-range for the sparkline. Effective only when autoscaling is disabled via
				[method set_sparkline_autoscale]([code]false[/code]).
				The control expects [code]min &lt; max[/code]; invalid ranges may be clamped or ignored internally.
			</description>
		</method>
	</methods>

	<members>
		<member name="Style/delta_negative" type="Color" setter="set_col_delta_neg" getter="get_col_delta_neg" default="Color(0, 0, 0, 1)">
			Color used to indicate a negative [member Values/delta] (e.g., down arrow or red tint).
		</member>

		<member name="Style/delta_positive" type="Color" setter="set_col_delta_pos" getter="get_col_delta_pos" default="Color(0, 0, 0, 1)">
			Color used to indicate a positive [member Values/delta] (e.g., up arrow or green tint).
		</member>

		<member name="Style/icon_size" type="int" setter="set_icon_size" getter="get_icon_size" default="24">
			Pixel size for [member Values/icon] when provided.
		</member>

		<member name="Values/delta" type="float" setter="set_delta" getter="get_delta" default="0.0">
			The percentage or absolute change displayed next to the main value. The sign determines positive/negative styling.
			Formatting is handled by the control's theme/presentation.
		</member>

		<member name="Values/footnote" type="String" setter="set_footnote" getter="get_footnote" default="&quot;&quot;">
			Small auxiliary text rendered at the bottom of the tile (e.g., "vs. yesterday").
		</member>

		<member name="Values/icon" type="Texture2D" setter="set_icon" getter="get_icon">
			Optional icon drawn in the header area of the tile.
		</member>

		<member name="Values/prefix" type="String" setter="set_prefix" getter="get_prefix" default="&quot;&quot;">
			String placed before [member Values/value] when displayed (e.g., currency symbol).
		</member>

		<member name="Values/subtitle" type="String" setter="set_subtitle" getter="get_subtitle" default="&quot;&quot;">
			Secondary label beneath the main title (e.g., "Last 24h").
		</member>

		<member name="Values/suffix" type="String" setter="set_suffix" getter="get_suffix" default="&quot;&quot;">
			String placed after [member Values/value] when displayed (e.g., units).
		</member>

		<member name="Values/title" type="String" setter="set_title" getter="get_title" default="&quot;&quot;">
			Main heading text shown at the top of the tile.
		</member>

		<member name="Values/title_color" type="Color" setter="set_title_col" getter="get_title_col" default="Color(0, 0, 0, 0)">
			Optional override color for the title. If fully transparent, the theme default is used.
		</member>

		<member name="Values/value" type="float" setter="set_value" getter="get_value" default="0.0">
			The primary numeric value displayed by the tile.
		</member>

		<member name="sparkline" type="PackedFloat32Array" setter="set_sparkline" getter="get_sparkline" default="PackedFloat32Array()">
			Time-ordered values used to draw the small trend line beneath the KPI. Combine with
			[method set_sparkline_autoscale] and [method set_sparkline_range] to control vertical scaling.
		</member>
	</members>

	<signals>
		<signal name="tile_clicked">
			<description>
				Emitted when the tile is clicked. Use this to trigger drill-down or navigation behaviors.
			</description>
		</signal>
	</signals>
</class>
